var keycode_F1=112,keycode_F2=113,keycode_F3=114,keycode_F4=115,keycode_F5=116,keycode_F6=117,keycode_F7=118,keycode_F8=119,keycode_F9=120,keycode_F10=121,keycode_F11=122,keycode_F12=123,_keycode=0;var is_editWin_show=false;var is_txt_show=false;var is_lrc_show=false;var txtHeight;var lrcHeight;var Player={obja:null,objv:null,obj:null,state:0,state2:0,is_playing:false,is_X_moving:false,rate:1,rate0:1,ratemin:0.5,ratemax:3,R_time_wait:0,R_time_wait_drag:0,is_bntP_down:false,is_btnP_moving:false,r_cnt0:0,r_cnt:0,r_cnt_tmp:0,R_time:5,is_R:false,is_R_stop:false,is_btnR_down:false,is_btnR_moving:false,timer_R:-1,dotA:0,dotA_old:0,dotA_wy:0,is_A:false,is_btnA_down:false,is_btnA_moving:false,dotB:0,dotB_old:0,dotB_wy:0,is_B:false,is_btnB_down:false,is_btnB_moving:false,is_labelA_show:false,is_labelB_show:false,labelA_x:0,labelB_x:0,play_list:[],current_index:-1,is_mp3:false,is_mp4:false,is_slider_dragging:false,is_touch:false,is_single:false,is_single_loop:false,is_multi_loop:true,is_sync:false,syncTimer:0,btnBorderColor:"",clear_list:function(){this.play_list.length=0;this.current_index=-1;},is_empty_play_list:function(){return this.play_list.length==0;},setobj:function(a){this.obj=document.getElementById(a);},sync:function(a){return;if(a==0){clearInterval(this.syncTimer);this.is_sync=false;return;}if(a!=0&&this.is_sync){return;}this.syncTimer=setInterval(function(){if(Player.obj.readyState==4){var c=Player.obj.currentTime/Player.obj.duration*Player.sliderWidth();if(typeof(c)=="NaN"){c=0;}$("#slider-play").width(c);}if(Player.obj.duration>0){Player.dispMS();}},50);this.is_sync=true;},ch:function(){var c=$("#playerblock");var a=$("#playerwrap");var d=setInterval(function(){c.height(a.outerHeight());},500);return d;},setPlayerRate:function(a){Player.rate=a;$("#btnX").text(a);},play:function(){if(arguments.length==0){this.obj.play();this.obj.playbackRate=Player.rate;}this.state=1;this.state2=1;$("#btnPlay").css("background-image","url(img/pause.png)");},playAB:function(){this.pause();this.startplayAB();this.is_R=true;this.btnR_on();},startplayAB:function(){Player.obj.currentTime=Player.dotA;clearInterval(Player.timer_R);Player.listeningAB();Player.play();},listeningAB:function(){var a=false;Player.timer_R=setInterval(function(){if(!a){$("#btnR").text(Player.r_cnt>0?(Player.r_cnt_tmp+1)+"/"+Player.r_cnt0:"");a=true;}if(Player.is_R_stop){clearInterval(Player.timer_R);Player.is_R_stop=false;Player.is_R=false;Player.btnR_off();$("#btnR").text(Player.r_cnt>0?Player.r_cnt:"");}else{if(Player.obj.currentTime>Player.dotB){if(Player.r_cnt0!=0){Player.r_cnt_tmp++;a=false;}if(Player.r_cnt_tmp>=Player.r_cnt&&Player.r_cnt0!=0){Player.cancelAB();Player.is_R_stop=true;Player.r_cnt_tmp=0;}else{Player.pause();Player.obj.currentTime=Player.dotB;clearInterval(Player.timer_R);setTimeout(Player.startplayAB,Player.R_time_wait);}}}},100);},cancelAB:function(){this.is_R_stop=true;},pause:function(){if(arguments.length==0){this.obj.pause();}this.state=2;$("#btnPlay").css("background-image","url(img/play.png)");},stop:function(){Player.obj.currentTime=0;Player.obj.pause();Player.state=0;Player.state2=0;$("#slider-play").width(0);$("#btnPlay").css("background-image","url(img/play.png)");if(lrc){clearTCTimer();this.obj.playbackRate=this.rate;if(Player.r_cnt0){$("#btnR").text(Player.r_cnt0);}}},btnR_on:function(){$("#btnR").css("background-color","#ffee00");},btnR_off:function(){$("#btnR").css("background-color","");},btnA_on:function(){$("#btnA").css("background-color","#ffea00");this.is_A=true;},btnA_off:function(){$("#btnA").css("background-color","#f1f1f1");this.is_A=false;},btnB_on:function(){$("#btnB").css("background-color","#ffea00");this.is_B=true;},btnB_off:function(){$("#btnB").css("background-color","#f1f1f1");this.is_B=false;},btnPlay_click:function(){if(Player.state==0||Player.state==2){Player.play();Player.state2=1;}else{if(Player.state==1){Player.pause();Player.state2=2;}}},btnStop_click:function(){this.btnC_click();Player.stop();Player.state2=2;},btnBf_click:function(c){var a;if(c.ctrlKey){a=Player.obj.currentTime-10;}else{a=Player.obj.currentTime-3;}if(a<0){a=0;}Player.obj.currentTime=a;},btnBf_longclick:function(){if(Player.is_labelA_show&&Player.is_labelB_show){var d=Player.dotA,a=Player.dotB-d,e;Player.dotB=d;e=d-a;if(e<0){e=0;}Player.dotA=e;Player.labelA_set(e);Player.labelB_set(d);}},btnFf_click:function(c){var a;if(c.ctrlKey){a=Player.obj.currentTime+10;}else{a=Player.obj.currentTime+3;}if(a>Player.obj.duration){a=Player.obj.duration;}Player.obj.currentTime=a;},btnFf_longclick:function(){if(Player.is_labelA_show&&Player.is_labelB_show){var d=Player.dotB,a=d-Player.dotA,e;Player.dotA=d;e=d+a;if(e>Player.obj.duration){e=Player.obj.duration;}Player.dotB=e;Player.labelA_set(d);Player.labelB_set(e);}},btnP_click:function(a){Player.R_time_wait=0;$("#btnP").text(Player.R_time_wait>0?x:"");},btnR_click:function(c){if(!this.is_R){var a=Player.obj.currentTime;if(a<0.5){a=Player.obj.currentTime=0.5;}Player.btnC_click();this.btnB_set(a);a-=Player.R_time;if(a<0){a=0;}this.btnA_set(a);}else{Player.cancelAB();}},btnR_dragging:function(c){c.preventDefault();var a=c.pageX,d=c.pageY;},btnA_click:function(a){Player.btnA_set(Player.obj.currentTime);},btnA_set:function(a){Player.labelA_set(a);if(Player.is_labelB_show){checkAB();Player.playAB();}},labelA_set:function(c){Player.dotA=c;var a=Player.labelA_x=c/Player.obj.duration*Player.sliderWidth();$("#lblA").css("left",a);Player.lblA_show();},btnB_click:function(a){Player.btnB_set(Player.obj.currentTime);},btnB_set:function(a){Player.labelB_set(a);if(Player.is_labelA_show){checkAB();Player.playAB();}},labelB_set:function(c){Player.dotB=c;var a=Player.labelB_x=c/Player.obj.duration*Player.sliderWidth();$("#lblB").css("left",a+10);Player.lblB_show();},btnC_click:function(){Player.lbl_hide();if(Player.is_R){Player.cancelAB();}},lblA_show:function(){$("#lblA").css("display","block");this.is_labelA_show=true;},lblA_hide:function(){$("#lblA").css("display","none");this.is_labelA_show=false;},lblB_show:function(){$("#lblB").css("display","block");this.is_labelB_show=true;},lblB_hide:function(){$("#lblB").css("display","none");this.is_labelB_show=false;},lbl_show:function(){this.lblA_show();this.lblB_show();},lbl_hide:function(){this.lblA_hide();this.lblB_hide();},bindBtns:function(){$("#btns button").on("mousedown touchstart",c);function c(f){f.preventDefault();var g=f.target;$(g).css("border","3px solid #999");$(g).on("mouseup mouseleave touchend",d);}function d(f){f.preventDefault();var g=f.target;$(g).css("border","3px solid "+Player.btnBorderColor);$(g).off("mouseup mouseleave touchend",d);$(this).blur();}$("#btnPlay").on("click touchend",function(f){if(!Player.obj){alert("霂瑕���㰘蝸���辣");return;}f.preventDefault();Player.btnPlay_click(f);this.blur();});$("#btnStop").on("click touchend",function(f){f.preventDefault();Player.btnStop_click(f);this.blur();});function e(h){var j,g=false;h.on("mousedown touchstart",function(){j=setTimeout(function(){g=true;f();},1000);h.on("mouseup touchend",function(k){k.preventDefault();clearTimeout(j);if(!g){h.trigger("shortpress",k);}g=false;h.off("mouseup touchend mouseout");});h.on("mouseout",function(){clearTimeout(j);g=false;h.off("mouseup touchend mouseout");});});function f(){h.trigger("longpress");}}e($("#btnBf"));e($("#btnFf"));$("#btnBf").on("shortpress",function(f,g){Player.btnBf_click(g);});$("#btnBf").on("longpress",function(){Player.btnBf_longclick();});$("#btnFf").on("shortpress",function(f,g){Player.btnFf_click(g);});$("#btnFf").on("longpress",function(){Player.btnFf_longclick();});$("#btnX").on("mousedown touchstart",function(g){g.preventDefault();Player.is_X_moving=true;var f;if(g.type=="touchstart"){g=g.touches[0];}f={x:g.pageX,y:g.pageY};$(document).on("mousemove touchmove",function(h){h.preventDefault();if(Player.is_X_moving){getX(h,f);}});$(document).on("mouseup touchend",function(h){h.preventDefault();$(document).off("mousemove touchmove mouseup touchend");Player.is_X_moving=false;Player.rate=Player.obj.playbackRate;});this.blur();});$("#btnX").on("click touchend",function(f){if(f.type=="click"){var g=$(this).offset();}else{if(f.type=="touchend"){f=f.changedTouches[0];var g=$(this).offset();if(!isInElem(this,{x:f.clientX,y:f.clientY})){return;}}}$("#btnX").text("1.0");Player.rate=1;Player.obj.playbackRate=1;this.blur();$("#btns").focus();});$("#btnP").on("mousedown touchstart",function(g){g.preventDefault();Player.is_btnP_down=true;var f;if(g.type=="touchstart"){g=g.touches[0];}f={x:g.pageX,y:g.pageY};$(document).on("mousemove touchmove",function(h){h.preventDefault();if(Player.is_btnP_down){getP(h,f);}});$(document).on("mouseup touchend",function(h){h.preventDefault();$(document).off("mousemove touchmove mouseup touchend");if(!Player.is_btnP_moving){Player.btnP_click();}else{Player.R_time_wait=Player.R_time_wait_drag;}Player.is_btnP_down=false;Player.is_btnP_moving=false;});this.blur();});$("#btnR").on("mousedown touchstart",function(g){g.preventDefault();Player.is_btnR_down=true;var f;if(g.type=="touchstart"){g=g.touches[0];}f={x:g.pageX,y:g.pageY};$(document).on("mousemove touchmove",function(h){h.preventDefault();if(Player.is_btnR_down){getR(h,f);}});$(document).on("mouseup touchend",function(h){h.preventDefault();$(document).off("mousemove touchmove mouseup touchend");if(!Player.is_btnR_moving){Player.btnR_click();}Player.is_btnR_down=false;Player.is_btnR_moving=false;Player.r_cnt0=Player.r_cnt;});this.blur();});function a(f,g){f.on("mousedown touchstart",function(k){k.preventDefault();var h=false;if(g=="A"){h=true;}if(h){Player.is_btnA_down=true;Player.dotA_old=Player.dotA;Player.dotA_wy=0;}else{Player.is_btnB_down=true;Player.dotB_old=Player.dotB;Player.dotB_wy=0;}var j;if(k.type=="touchstart"){k=k.touches[0];}j={x:k.pageX,y:k.pageY};$(document).on("mousemove touchmove",function(l){l.preventDefault();if(h){Player.is_btnA_moving=true;if(Player.is_btnA_down){getAB(l,j,true);}}else{Player.is_btnB_moving=true;if(Player.is_btnB_down){getAB(l,j,false);}}});$(document).on("mouseup touchend",function(l){$(document).off("mousemove touchmove mouseup touchend");if(h){if(Player.dotA_wy<6){Player.btnA_click(l);}Player.is_btnA_down=false;Player.is_btnA_moving=false;Player.dotA_old=Player.dotA;f.text("");}else{if(Player.dotB_wy<6){Player.btnB_click(l);}Player.is_btnB_down=false;Player.is_btnB_moving=false;Player.dotB_old=Player.dotB;f.text("");}checkAB();});this.blur();});}a($("#btnA"),"A");a($("#btnB"),"");$("#btnC").on("mousedown touchend",function(f){Player.btnC_click();});},bindEvents:function(){$("#ap, #vp").on("play",function(){});$("#ap, #vp").on("ended",function(){if(Player.state2==2||Player.is_slider_dragging){return;}Player.obj.currentTime=0;Player.play();});$("#ap, #vp").on("play",function(){Player.play(0);Player.state2=1;});$("#ap, #vp").on("pause",function(){Player.pause(0);});},sliderWidth:function(){return $("#slider-frame").width();},dispMS:function(){$("#timebox").text(Player.currentMSstring());},dispSrc:function(a){$("#srcname").text(a);},NtoMSstring:function(d){var a=(d/60).toFixed(),c=(d%60).toFixed();a=(a<10)?"0"+a:a;c=(c<10)?"0"+c:c;return a+":"+c;},NtoMSstring_OLD:function(d){var a=d/60,c=d%60;a=(a<10)?"0"+a.toFixed():a.toFixed();c=(c<10)?"0"+c.toFixed():c.toFixed();return a+":"+c;},currentMSstring:function(){return this.NtoMSstring(this.obj.currentTime)+" / "+this.NtoMSstring(this.obj.duration);},rgb2hex:function(a){a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function c(d){return("0"+parseInt(d).toString(16)).slice(-2);}return"#"+c(a[1])+c(a[2])+c(a[3]);},playersize:function(){if(Player.play_list[Player.current_index].substr(-3)=="mp4"){Player.videosize();}else{Player.audiosize();}},audiosize:function(){$("#vp").css("display","none");},videosize:function(){$("#vp").css("display","block");},init:function(){this.obja=document.getElementById("ap");this.objv=document.getElementById("vp");if(detectTouch()){this.is_touch=true;}this.btnBorderColor=this.rgb2hex($("#btns button").css("borderTopColor"));this.ch();}};function getX(g,f){if(g.type=="touchmove"){g=g.touches[0];}var a,d=g.pageX-f.x,c=f.y-g.pageY;a=(myabs(d)>=myabs(c))?d:c;a=parseInt(a/10);a=Player.rate+a/10;if(a>Player.ratemax){a=Player.ratemax;}else{if(a<Player.ratemin){a=Player.ratemin;}}a=a.toFixed(1);Player.obj.playbackRate=parseFloat(a);$("#btnX").text(a);}function myabs(a){if(a>0){return a;}else{return -a;}}function getP(g,f){if(g.type=="touchmove"){g=g.touches[0];}var a,d=g.pageX-f.x,c=f.y-g.pageY;a=(myabs(d)>=myabs(c))?d:c;Player.is_btnP_moving=(function(){var e=a>0?a:-a;if(e>10){return true;}else{return false;}})();a=parseInt(a/20);a=Player.R_time_wait/1000+a;if(a>99){a=99;}else{if(a<0){a=0;}}$("#btnP").text(a>0?a:"");Player.R_time_wait_drag=a*1000;}function getR(g,f){if(g.type=="touchmove"){g=g.touches[0];}var a,d=g.pageX-f.x,c=f.y-g.pageY;a=(myabs(d)>=myabs(c))?d:c;Player.is_btnR_moving=(function(){var e=a>0?a:-a;if(e>10){return true;}else{return false;}})();a=parseInt(a/20);a=Player.r_cnt0+a;if(a>99){a=99;}else{if(a<0){a=0;}}$("#btnR").text(a>0?a:"");Player.r_cnt=a;}function getAB(j,h,d){if(j.type=="touchmove"){j=j.touches[0];}var c,g=j.pageX-h.x,f=h.y-j.pageY;c=(myabs(g)>=myabs(f))?g:f;d?(Player.dotA_wy=((c>=0)?c:-c)):(Player.dotB_wy=((c>=0)?c:-c));c=parseInt(c/25);d?(Player.dotA=Player.dotA_old+c):(Player.dotB=Player.dotB_old+c);if(d){if(Player.dotA<0){Player.dotA=0;}else{if(Player.dotA>Player.obj.duration){Player.dotA=Player.obj.duration;}}Player.labelA_x=Player.dotA/Player.obj.duration*Player.sliderWidth();if(!Player.is_labelA_show){return;}$("#lblA").css({left:Player.labelA_x});$("#btnA").text(c);}else{if(Player.dotB<0){Player.dotB=0;}else{if(Player.dotB>Player.obj.duration){Player.dotB=Player.obj.duration;}}Player.labelB_x=Player.dotB/Player.obj.duration*Player.sliderWidth();if(!Player.is_labelB_show){return;}$("#lblB").css({left:Player.labelB_x+10});$("#btnB").text(c);}}function checkAB(){if(!Player.is_labelA_show||!Player.is_labelB_show){return;}if(Player.labelA_x>Player.labelB_x){var a=Player.labelA_x;Player.labelA_x=Player.labelB_x;Player.labelB_x=a;a=Player.dotA;Player.dotA=Player.dotB;Player.dotB=a;$("#lblA").css({left:Player.labelA_x,display:"block"});$("#lblB").css({left:Player.labelB_x+10,display:"block"});}}function bindSlider(){var c=$(Player.obj),a=c[0];$("#slider").mousedown(function(d){d.preventDefault();if(Player.is_touch){return;}Player.is_slider_dragging=true;gotoE(d);$("#playerwrap").on("mousemove",function(f){f.preventDefault();if(Player.is_touch){return;}if(Player.is_slider_dragging){gotoE(f);}});});$("#playerwrap").on("mouseup mouseleave",function(d){if(Player.is_touch){return;}$("#playerwrap").off("mousemove");Player.is_slider_dragging=false;});$("#slider").on("touchstart",function(d){d.preventDefault();Player.is_slider_dragging=true;gotoETouch(d);});$("#slider").on("touchmove",function(d){d.preventDefault();Player.is_slider_dragging=true;gotoETouch(d);});$("#slider").on("touchend",function(d){d.preventDefault();Player.is_slider_dragging=false;gotoETouch(d);});}function gotoE(c){var a=c.pageX-$("#slider-frame").offset().left;Player.obj.currentTime=Player.obj.duration*a/Player.sliderWidth();}function gotoETouch(c){var d,a;if(c.type=="touchend"){d=c.changedTouches[0];}else{d=c.touches[0];}a=d.pageX-$("#slider-frame").offset().left;Player.obj.currentTime=Player.obj.duration*a/Player.sliderWidth();}$(function(){Player.init();var a=document.getElementById("slider-frame");bindSlider();Player.bindBtns();Player.bindEvents();InstallHtmlFuncKeys();bindothers();});$(window).scroll(function(){var f=$(window);var d=$("#playerblock");var c=$("#playerwrap");var j=f.scrollTop();var e=d.offset().top;if(j>e){c.addClass("stick0");}else{c.removeClass("stick0");}var a=$("#srcWinBarBlock");var h=$("#srcWinBar");var g=a.offset().top;if(j>g-170){h.addClass("stick1");}else{h.removeClass("stick1");}});$(window).resize(function(){var a=$(window).width();});function InstallHtmlFuncKeys(){document.onkeydown=function(c){var d=c||window.event,a=d.keyCode;if(a>=112&&a<=123){_keycode=a;switch(a){case keycode_F1:F1();break;case keycode_F2:F2();break;case keycode_F3:F3();break;case keycode_F4:F4();break;case keycode_F5:return;case keycode_F6:F6();break;case keycode_F7:F7();break;case keycode_F8:F8();break;case keycode_F9:F9();break;case keycode_F10:F10();break;case keycode_F11:F11();break;case keycode_F12:F12();break;default:break;}d.returnValue=false;d.preventDefault();d.stopPropagation();return false;}};}function F5(){}function F7(){Player.btnStop_click();}function F8(){Player.btnPlay_click();}function F9(){Player.btnR_click();}function F10(){}function F11(){}function F12(){}function disp(c){var a=document.getElementById("disp").innerText;a=a+" | "+c;document.getElementById("disp").innerText=a;}function displist(){var a=Player.play_list.join("|");a=a+"||"+Player.obj.src;$("#disp-list").html(a);}function dispState(){$("#readystate").text("�𠶖��:"+Player.obj.readyState+", �鵭摨�:"+Player.obj.duration+", ���𨅯炏:"+Player.obj.paused+", state="+Player.state+", ended="+Player.obj.ended+", Player.rate="+Player.rate+", obj.rate="+Player.obj.playbackRate);}function isInElem(f,e){$o=$(f);var a=$o.offset().left,g=$o.offset().top,c=$o.outerWidth(),d=$o.outerHeight();a=a-$(document).scrollLeft();g=g-$(document).scrollTop();if((e.x>=a)&&(e.x<=a+c)&&(e.y>=g)&&(e.y<=g+d)){return true;}else{return false;}}function touch(a){var c=a||window.event,d=c.touches[0];}function getxy(c){var a="clientXY: "+c.clientX.toFixed()+", "+c.clientY.toFixed()+"\npageXY: "+c.pageX.toFixed()+", "+c.pageY.toFixed()+"\nscreenXY:"+c.screenX.toFixed()+", "+c.screenY.toFixed();return a;}function detectTouch(){if((navigator.userAgent.match(/(iPhone|iPad|iPod|Android|ios|Symbian|mobile|ubweb|windows ce)/i))){return true;}else{return false;}}function bindothers(){(function(){document.getElementById("btn-usage").onclick=function(d){if($("#btnsTC").is(":visible")){$("#uc2").show();}else{$("#uc2").hide();}$("#usagecontent").toggle();};})();(function(){document.getElementById("btn-edit").onclick=function(d){if($("#editWin").is(":hidden")){$("#editWin").show();is_editWin_show=true;}else{$("#editWin").hide();is_editWin_show=false;}};})();(function(){$("#tablrc").click(function(){if($("#tablrc").is(".tabshow")){return;}$("#tablrc").addClass("tabshow");$("#tabtxt").removeClass("tabshow");$("#lrc").show();$("#txt").hide();});})();(function(){$("#tabtxt").click(function(){if($("#tabtxt").is(".tabshow")){return;}$("#tabtxt").addClass("tabshow");$("#tablrc").removeClass("tabshow");$("#txt").show();$("#lrc").hide();});})();function a(d){if(d){$("#txt").show();$("#btn-txt").css("background-image","url(/webr8/img/txt.png)");is_txt_show=true;}else{$("#txt").hide();$("#btn-txt").css("background-image","url(/webr8/img/txtno.png)");is_txt_show=false;}}function c(d){if(d){$("#lrc").show();$("#btn-lrc").css("background-image","url(/webr8/img/lrc.png)");is_lrc_show=true;}else{$("#lrc").hide();$("#btn-lrc").css("background-image","url(/webr8/img/lrcno.png)");is_lrc_show=false;}}(function(){if($("#btn-txt").length==0){return;}document.getElementById("btn-txt").onclick=function(d){if($("#txt").is(":visible")){a(false);c(true);}else{a(true);c(false);}};})();(function(){if($("#btn-lrc").length==0){return;}document.getElementById("btn-lrc").onclick=function(d){if($("#lrc").is(":visible")){}else{}$("#btn-txt").click();};})();(function(){$("#srcWinBarFull").click(function(){if($("#tablrc").is(".tabshow")){$("#lrc").css({height:"auto",overflowY:"visible"});}else{$("#txt").css({height:"auto",overflowY:"visible"});}});})();(function(){$("#srcWinBarPart").click(function(){if($("#tablrc").is(".tabshow")){$("#lrc").css({height:"300px",overflowY:"scroll"});}else{$("#txt").css({height:"300px",overflowY:"scroll"});}});})();!function(){var e;var g=false;var h=document.getElementById("vp");h.onclick=function(j){j.preventDefault();clearTimeout(e);e=setTimeout(function(){Player.btnPlay_click();},300);};h.ondblclick=function(j){var j=j||window.event;if(window.event){j.cancelBubble=true;}else{j.stopPropagation();}j.preventDefault();clearTimeout(e);if(g){d(h);g=false;}else{f(h);g=true;}console.log("dbl click");};function f(j){if(j.requestFullscreen){j.requestFullscreen();}else{if(j.webkitRequestFullScreen){j.webkitRequestFullScreen();}else{if(j.mozRequestFullScreen){j.mozRequestFullScreen();}else{if(j.msRequestFullscreen){j.msRequestFullscreen();}}}}}function d(j){if(document.exitFullscreen){document.exitFullscreen();}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else{if(document.msExitFullscreen){document.msExitFullscreen();}}}}}}();}function fontSize(d,a,c){var d=d||window.event;var h;if(a==0){h=$("#editWinText");}else{if($("#tablrc").is(".tabshow")){h=$("#lrc li");}else{h=$("#txt");}}if(d.ctrlKey){h.css("font-size","16px");return;}var g;g=parseInt(h.css("font-size"));if(c==-1){if(g!=12){h.css("font-size",(g-2)+"px");}}else{if(c==1){if(g!=24){h.css("font-size",(g+2)+"px");}}}}function send(){var a=document.getElementById("editWinForm").editWinText.value.trim();if(a==""){alert("瘝⊥�匧��摰對�峕�䭾�蓥�嘥�矋�\n\nNothing to Save!");return;}if(a.length>100000){alert("鈭莎�𡁏�典�坔�堒云憭帋�嚗峕�睲�嘥�䀝�滢�页�\n\nText Length Cannot Access 100K !");return;}document.getElementById("editWinForm").submit();}function basename(c){var a=c.lastIndexOf("/");if(a==-1){return c;}else{return c.substr(a+1);}}function filefirstname(a){var c=a.lastIndexOf(".");if(c==-1){return a;}return a.substr(0,c);}function filelastname(a){var c=a.lastIndexOf(".");if(c==-1){return a;}return a.substr(c+1);}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"");};String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"");};String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"");};var playtcTimer=0;var tcIndex=0;var tcLength=0;var tcR_cnt=3;var tcR_cntNow;var tcMode;var is_R_TC=false;var tcFrom;var tcTo;var nowShow="lrc";var timer_R_TC=0;function yellowline(a){$("#lrc li").css("background-color","");$("#lrc div").eq(a).children("li").css("background-color","#ffee44");}function btnTC_on(a,c){a.css("background-color",c?"#ffee00":"");}function btnTC_off(){btnTC_on($("#btnTCRline"),false);btnTC_on($("#btnTCRlines"),false);btnTC_on($("#btnTCXRline"),false);btnTC_on($("#btnTCXRlines"),false);}function clearTCTimer(a){clearInterval(playtcTimer);is_R_TC=false;btnTC_off();if(a){Player.rate=Player.rate0;Player.setPlayerRate(Player.rate);}}function playTCline(a){is_R_TC=true;tcMode=0;tcIndex=a;tcFrom=tc[a];if(a<tcLength-1){tcTo=tc[a+1];}else{tcTo=Player.obj.duration;}Player.obj.currentTime=tcFrom;Player.play();Player.obj.playbackRate=Player.rate;clearTCTimer();playtcTimer=setInterval(function(){if(Player.obj.currentTime>tcTo-0.1){Player.pause();clearTCTimer();Player.obj.currentTime=tcFrom;is_R_TC=false;}},20);}function playTCRline(a){is_R_TC=true;tcMode=1;tcIndex=a;tcFrom=tc[a];if(a<tcLength-1){tcTo=tc[a+1];}else{tcTo=Player.obj.duration;}Player.obj.currentTime=tcFrom;Player.play();Player.obj.playbackRate=Player.rate;clearTCTimer();btnTC_on($("#btnTCRline"),true);tcR_cntNow=0;disped=false;playtcTimer=setInterval(function(){if(Player.r_cnt0&&!disped){$("#btnR").text((tcR_cntNow+1)+"/"+Player.r_cnt0);disped=true;}if(Player.obj.currentTime>tcTo-0.1){Player.pause();Player.obj.currentTime=tcFrom;if(Player.r_cnt0&&++tcR_cntNow>=Player.r_cnt0){clearTCTimer();is_R_TC=false;$("#btnR").text(Player.r_cnt0);}else{disped=false;timer_R_TC=setTimeout(function(){Player.play();},Player.R_time_wait);}}},20);}function playTCRlines(){is_R_TC=true;tcMode=2;i=tcIndex;tcFrom=tc[tcIndex];if(i<tcLength-1){tcTo=tc[i+1];}else{tcTo=Player.obj.duration;}Player.obj.currentTime=tcFrom;Player.play();Player.obj.playbackRate=Player.rate;clearTCTimer(false);btnTC_on($("#btnTCRlines"),true);if(Player.r_cnt0==0){Player.r_cnt0=3;tcR_cnt=3;$("#btnR").text(Player.r_cnt0);}else{tcR_cnt=Player.r_cnt0;}tcR_cntNow=0;playtcTimer=setInterval(function(){$("#btnR").text((tcR_cntNow+1)+"/"+Player.r_cnt0);if(Player.obj.currentTime>tcTo-0.1){Player.pause();Player.obj.currentTime=tcFrom;Player.r_cnt0==0?tcR_cnt=3:tcR_cnt=Player.r_cnt0;if(++tcR_cntNow>=tcR_cnt){clearTCTimer(false);if(tcIndex==tcLength-1){tcIndex=0;}else{tcIndex++;}$("#btnR").text(tcR_cnt);playTCRlines(tcIndex);}else{timer_R_TC=setTimeout(function(){Player.play();},Player.R_time_wait);}}},20);}function playTCXRline(a){is_R_TC=true;tcMode=3;tcIndex=a;tcFrom=tc[a];if(a<tcLength-1){tcTo=tc[a+1];}else{tcTo=Player.obj.duration;}Player.obj.currentTime=tcFrom;Player.rate0=Player.rate;Player.play();Player.obj.playbackRate=1;Player.setPlayerRate(1);clearTCTimer(false);btnTC_on($("#btnTCXRline"),true);tcR_cnt=3;tcR_cntNow=0;playtcTimer=setInterval(function(){$("#btnR").text((tcR_cntNow+1)+"/"+tcR_cnt);if(Player.obj.currentTime>tcTo-0.1){Player.pause();Player.obj.currentTime=tcFrom;if(++tcR_cntNow>=tcR_cnt){clearTCTimer(true);$("#btnR").text(tcR_cnt);}else{timer_R_TC=setTimeout(function(){Player.play();},Player.R_time_wait);if(tcR_cntNow==1){Player.setPlayerRate(0.7);}else{if(tcR_cntNow==2){Player.setPlayerRate(1.5);}}}}},20);}function playTCXRlines(){is_R_TC=true;tcMode=4;i=tcIndex;tcFrom=tc[tcIndex];if(i<tcLength-1){tcTo=tc[i+1];}else{tcTo=Player.obj.duration;}Player.obj.currentTime=tcFrom;Player.rate0=Player.rate;Player.play();Player.obj.playbackRate=1;Player.setPlayerRate(1);clearTCTimer(false);btnTC_on($("#btnTCXRlines"),true);tcR_cnt=3;tcR_cntNow=0;playtcTimer=setInterval(function(){$("#btnR").text((tcR_cntNow+1)+"/"+tcR_cnt);if(Player.obj.currentTime>tcTo-0.1){Player.pause();Player.obj.currentTime=tcFrom;if(++tcR_cntNow>=tcR_cnt){clearInterval(playtcTimer);Player.obj.playbackRate=Player.rate;$("#btnR").text("");if(tcIndex==tcLength-1){tcIndex=0;}else{tcIndex++;}playTCXRlines(tcIndex);}else{timer_R_TC=setTimeout(function(){Player.play();},Player.R_time_wait);if(tcR_cntNow==1){Player.setPlayerRate(0.7);}else{if(tcR_cntNow==2){Player.setPlayerRate(1.5);}}}}},20);}$(function(){});function b(){tcLength=tc.length;bindDisp();if(detectTouch()){$("#txt, #lrc").addClass("txt-touch1");$("#txt li, #lrc li").addClass("txt-touch2");}$("#lrc li").click(function(){var a=$(this).parent().index();playTCline(a);});$("#lrc li").dblclick(function(){});$("#btnTCPlay").click(function(){playTCline(tcIndex);});$("#btnTCStop").click(function(){$("#btnStop").click();clearTCTimer();Player.obj.currentTime=tc[tcIndex];Player.pause();if(Player.r_cnt0){$("#btnR").text(Player.r_cnt0);}});$("#btnTCBf").click(function(){if(tcIndex>0){tcIndex--;}tcFrom=tc[tcIndex];tcTo=tc[tcIndex+1];tcR_cntNow=0;Player.obj.currentTime=tcFrom;Player.obj.playbackRate=Player.rate;});$("#btnTCFf").click(function(){if(tcIndex<tcLength-1){tcIndex++;}tcFrom=tc[tcIndex];tcTo=(tcIndex<(tcLength-1)?tc[tcIndex+1]:Player.obj.duration);tcR_cntNow=0;Player.obj.currentTime=tcFrom;Player.obj.playbackRate=Player.rate;});$("#btnTCRline").click(function(){playTCRline(tcIndex);});$("#btnTCRlines").click(function(){playTCRlines();});$("#btnTCXRline").click(function(){playTCXRline(tcIndex);});$("#btnTCXRlines").click(function(){playTCXRlines();});}function bindDisp(){$(Player.obj).on("timeupdate",function(j){var a=this.currentTime/this.duration*Player.sliderWidth();$("#slider-play").width(a);Player.dispMS();if(!lrc||nowShow=="txt"){return;}var d=this.currentTime.toFixed(2);for(var g=0;g<tcLength;g++){if(tc[g]>d){break;}}tcIndex=g-1;if(tcIndex<0){tcIndex=0;}yellowline(tcIndex);var f=$("#lrc div:eq("+tcIndex+")");var h=f.position().top;var c=$("#lrc").scrollTop();if(h>250||h<10){$("#lrc").scrollTop(c+h-40);}});$(Player.obj).on("loadeddata",function(a){Player.dispMS();});}function browseMedia(g){var e=document.getElementById("browseMedia").files[0];var c=e.name;var d=e.size;var a=URL.createObjectURL(e);$("#mediaName").text(c);if(Player.obj){Player.obj.pause();}if(filelastname(c)=="mp3"){Player.obja.src=srcNow=a;Player.obj=Player.obja;mp3=" ";$("#vp").hide();}else{if(filelastname(c)=="mp4"){Player.objv.src=srcNow=a;Player.obj=Player.objv;mp4=" ";$("#vp").show();}}Player.dispSrc(c);b();bindDisp();}function browseText(j){var g=document.getElementById("browseText").files[0];var d=g.name;var e=g.size;var c=URL.createObjectURL(g);$("#textName").text(d);var a=new FileReader();a.readAsText(g);var h;a.onload=function(){$("#srcWin").show();h=this.result;if(filelastname(d)=="txt"){puttxt(h);$("#tabtxt").addClass("tabshow");$("#tablrc").removeClass("tabshow");$("#txt").show();$("#lrc").hide();}else{if(filelastname(d)=="lrc"){putlrc(h);$("#tablrc").addClass("tabshow");$("#tabtxt").removeClass("tabshow");$("#lrc").show();$("#txt").hide();}}};}function puttxt(a){var a=a.replace(/\r\n/g,"<br>");clearTCTimer();$("#btnsTC").hide();nowShow="txt";$("#txt").html(a).show();$("#lrc").hide();}function putlrc(d){var c=d.split("\r\n");loadLrc2Page(c);}function loadLrc2Page(l){var d,e,h=[],k="";var j=0;for(var f=0;f<l.length;f++){if(l[f].trim()==""){continue;}if(/\[\d\d:\d\d\.\d\d\]/.test(l[f])){var g=l[f].indexOf("]");d=l[f].substr(1,g-1);e=l[f].substr(g+1);var c=s2n(d);h.push(parseFloat(c));k+="<div><span>"+(++j)+"</span><li>"+e+"</li></div>";}}clearTCTimer();$("#btnsTC").show();nowShow="lrc";$("#lrc").html(k).show();$("#txt").hide();tc=h;tcLength=tc.length;lrc=" ";b();bindDisp();}function s2n(a){n=a.split(":");n=parseInt(n[0])*60+parseFloat(n[1]);return n.toFixed(2);}
